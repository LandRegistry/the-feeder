language: python
python:
- '2.7'
install:
- pip install -r requirements.txt
- pip install -r requirements_test.txt
- pip install python-coveralls
env:
- SETTINGS='config.TestConfig'
script:
- source ./environment_test.sh
- py.test --cov thefeeder tests/ --cov-report=term --cov-report=html
after_success:
- coveralls
deploy:
  provider: heroku
  api_key:
    secure: m2dYxAqaYjRL8guNmIsoB8s1nbmh+OvzISD3G05PtqLE7sKDJCv6wNCsaBBX6swoDPBVeon/d/rQQynfq+/CKtSM+yG2WghZoDia2Gi6i5d9NCaxGW2DdqDi2litrM0zqXaXhInDHtQkuG0DY/mw8E2NbN9CBehcZbkOBrgMuww=
  app: the-feeder
  on:
    repo: LandRegistry/the-feeder
